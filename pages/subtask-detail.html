<div class="subtask-detail-container">
    <div class="detail-header">
        <button class="back-btn" onclick="window.subtaskDetailManager.goBackToTask()">
            ‚Üê Back to Task
        </button>
        <h1 class="subtask-title" id="subtask-title">Subtask Details</h1>
    </div>

    <div class="subtask-info-section">
        <div class="subtask-basic-info">
            <div class="info-item">
                <label>Subtask Name:</label>
                <span id="subtask-name">-</span>
            </div>
            <div class="info-item">
                <label>Parent Task:</label>
                <span id="parent-task-name">-</span>
            </div>
            <div class="info-item">
                <label>Created:</label>
                <span id="subtask-created-at">-</span>
            </div>
            <div class="info-item">
                <label>Last Updated:</label>
                <span id="subtask-updated-at">-</span>
            </div>
        </div>
        
        <div class="subtask-description-section">
            <label>Description:</label>
            <p id="subtask-description">-</p>
        </div>
    </div>

    <div class="status-section">
        <h2>Status</h2>
        <div class="status-controls">
            <div class="status-options">
                <label class="status-option">
                    <input type="radio" name="status" value="start" id="status-start">
                    <span class="status-label start">Start</span>
                </label>
                <label class="status-option">
                    <input type="radio" name="status" value="done" id="status-done">
                    <span class="status-label done">Done</span>
                </label>
            </div>
            <button class="btn btn-primary" onclick="window.subtaskDetailManager.updateStatus()">
                Update Status
            </button>
        </div>
    </div>

    <div class="effort-tracking-section">
        <h2>Effort Tracking</h2>
        <div class="effort-entry">
            <h3>Add Time Spent</h3>
            <form id="effort-form">
                <div class="effort-input-row">
                    <div class="form-group">
                        <label for="effort-hours">Hours</label>
                        <input type="number" id="effort-hours" min="0" max="24" step="0.5" value="0">
                    </div>
                    <div class="form-group">
                        <label for="effort-minutes">Minutes</label>
                        <input type="number" id="effort-minutes" min="0" max="59" step="1" value="0">
                    </div>
                    <div class="form-group">
                        <label for="effort-date">Date</label>
                        <input type="date" id="effort-date" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="effort-notes">Notes</label>
                    <textarea id="effort-notes" placeholder="What did you work on?" rows="2"></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Add Effort</button>
            </form>
        </div>

        <div class="effort-history">
            <h3>Time Log</h3>
            <div class="effort-list" id="effort-list">
                <div class="empty-efforts" id="empty-efforts">
                    <p>No time entries yet. Add your first effort above.</p>
                </div>
            </div>
            <div class="total-effort">
                <strong>Total Time: <span id="total-effort">0h 0m</span></strong>
            </div>
        </div>
    </div>

    <div class="comments-section">
        <h2>Comments</h2>
        <div class="comment-entry">
            <form id="comment-form">
                <div class="form-group">
                    <label for="comment-text">Add Comment</label>
                    <textarea id="comment-text" placeholder="Enter your comment..." rows="3" required></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Add Comment</button>
            </form>
        </div>

        <div class="comments-list">
            <h3>Comments History</h3>
            <div class="comments-container" id="comments-container">
                <div class="empty-comments" id="empty-comments">
                    <p>No comments yet. Add your first comment above.</p>
                </div>
            </div>
        </div>
    </div>

    <div class="subtask-actions">
        <button class="btn btn-secondary" onclick="window.subtaskDetailManager.editSubtask()">
            Edit Subtask
        </button>
        <button class="btn btn-danger" onclick="window.subtaskDetailManager.deleteSubtask()">
            Delete Subtask
        </button>
        <button class="btn btn-primary" onclick="window.subtaskDetailManager.saveChanges()">
            Save Changes
        </button>
    </div>
</div>

<!-- Edit Comment Modal -->
<div class="modal" id="edit-comment-modal" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Edit Comment</h3>
            <button class="close-btn" onclick="window.subtaskDetailManager.closeCommentModal()">&times;</button>
        </div>
        <form id="edit-comment-form">
            <div class="form-group">
                <label for="edit-comment-text">Comment</label>
                <textarea id="edit-comment-text" rows="3" required></textarea>
            </div>
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" onclick="window.subtaskDetailManager.closeCommentModal()">
                    Cancel
                </button>
                <button type="submit" class="btn btn-primary">
                    Update Comment
                </button>
            </div>
        </form>
    </div>
</div>